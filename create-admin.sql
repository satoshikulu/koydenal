-- =====================================================
-- ADMIN KULLANICI OLUÅžTURMA SQL KOMUTLARI
-- =====================================================
-- Bu komutlarÄ± Supabase SQL Editor'da Ã§alÄ±ÅŸtÄ±rÄ±n

-- =====================================================
-- 1. AUTH.USERS TABLOSUNA ADMIN KULLANICI EKLE
-- =====================================================
-- NOT: Bu komut manuel Ã§alÄ±ÅŸtÄ±rÄ±lmalÄ±dÄ±r Ã§Ã¼nkÃ¼ auth.users
-- Supabase tarafÄ±ndan Ã¶zel yÃ¶netilir

-- Supabase Dashboard > Authentication > Users > Add User ile:
-- Email: satoshinakamototokyo42@gmail.com
-- Password: Sevimbebe4242.
-- Auto Confirm Email: âœ… iÅŸaretleyin

-- =====================================================
-- 2. USER_PROFILES TABLOSUNA ADMIN ROLÃœ ATA
-- =====================================================

-- Ã–nce kullanÄ±cÄ±yÄ± auth.users'ta oluÅŸturun, sonra bu komutu Ã§alÄ±ÅŸtÄ±rÄ±n:

INSERT INTO user_profiles (id, email, full_name, phone, location, role, created_at, updated_at)
SELECT
  id,
  email,
  'Admin KullanÄ±cÄ±',
  '+90 555 987 6543',
  'Kulu, Konya',
  'admin',
  NOW(),
  NOW()
FROM auth.users
WHERE email = 'satoshinakamototokyo42@gmail.com'
ON CONFLICT (id) DO UPDATE SET
  role = 'admin',
  updated_at = NOW();

-- =====================================================
-- 3. DOÄžRULAMA SORGUSU
-- =====================================================

-- Admin kullanÄ±cÄ±sÄ±nÄ± kontrol et
SELECT
  u.email,
  p.full_name,
  p.role,
  p.created_at
FROM auth.users u
LEFT JOIN user_profiles p ON u.id = p.id
WHERE u.email = 'satoshinakamototokyo42@gmail.com';

-- TÃ¼m admin kullanÄ±cÄ±larÄ±nÄ± listele
SELECT
  u.email,
  p.full_name,
  p.role
FROM auth.users u
LEFT JOIN user_profiles p ON u.id = p.id
WHERE p.role = 'admin';

-- =====================================================
-- KURULUM TAMAMLANDI!
-- =====================================================

SELECT 'ðŸŽ‰ Admin kullanÄ±cÄ±sÄ± baÅŸarÄ±yla oluÅŸturuldu!' as status;
